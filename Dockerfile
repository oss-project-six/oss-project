# -------------------------------------------------------
# 1) 베이스 이미지: Java 17이 포함된 가벼운 Alpine 기반 OpenJDK
# -------------------------------------------------------
FROM eclipse-temurin:17-jdk-alpine

# -------------------------------------------------------
# 2) 컨테이너 내 작업 디렉토리 설정
# -------------------------------------------------------
WORKDIR /app

# -------------------------------------------------------
# 3) 로컬에서 Gradle 빌드로 생성된 JAR을 컨테이너로 복사
#    - build/libs/ 안에 있는 fat JAR(의존성 포함)을 app.jar로 복사
# -------------------------------------------------------
COPY build/libs/oss-project-0.0.1-SNAPSHOT.jar ./app.jar

# -------------------------------------------------------
# 4) 컨테이너가 외부와 통신할 포트(예: Spring Boot 기본 8080)을 오픈
# -------------------------------------------------------
EXPOSE 8080

# -------------------------------------------------------
# 5) 컨테이너 실행 시 실행될 커맨드
#    - java -jar /app/app.jar 명령으로 Spring Boot 애플리케이션 구동
# -------------------------------------------------------
ENTRYPOINT ["java", "-jar", "/app/app.jar"]
